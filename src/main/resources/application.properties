spring.application.name=ussd-gateway

# ===== R2DBC Configuration =====
spring.r2dbc.url=r2dbc:postgresql://localhost:5432/ussd_db
spring.r2dbc.username=n
spring.r2dbc.password=nkwarukunai124
spring.r2dbc.properties.json=postgresql

# Connection Pool
spring.r2dbc.pool.initial-size=10
spring.r2dbc.pool.max-size=50
spring.r2dbc.pool.max-idle-time=30m

# ===== Liquibase Configuration =====
spring.liquibase.enabled=true
spring.liquibase.change-log=classpath:db/changelog/db-changelog-master.xml
spring.liquibase.url=jdbc:postgresql://localhost:5432/ussd_db
spring.liquibase.user=n
spring.liquibase.password=nkwarukunai124
spring.liquibase.driver-class-name=org.postgresql.Driver

# ===== Internationalization Configuration =====
spring.messages.basename=messages
spring.messages.encoding=UTF-8

# ===== Static Resources Configuration =====
spring.web.resources.add-mappings=true
spring.web.resources.static-locations=classpath:/static/

# ===== JPA Configuration (Disabled) =====
spring.jpa.enabled=false
spring.jpa.hibernate.ddl-auto=none

# ===== Server Configuration =====
server.port=8080
server.servlet.encoding.charset=UTF-8

# ===== USSD Configuration =====
# Code USSD du menu principal (par défaut: *500#)
ussd.main-menu.code=*500#

# Préfixe pour les codes de service (*500*1#, *500*2#, etc.)
ussd.service.code-prefix=*500*
ussd.service.code-suffix=#

# ===== Session Configuration =====
# Durée d'inactivité avant expiration (en minutes)
ussd.session.timeout-minutes=5

# Fréquence de nettoyage des sessions (en ms)
ussd.session.cleanup-rate-ms=60000

# Suppression définitive des anciennes sessions
ussd.session.hard-delete-after-days=7
ussd.session.hard-delete-cron=0 0 2 * * *

# ===== Logging =====
logging.level.com.network.projet.ussd=DEBUG
logging.level.org.springframework.r2dbc=DEBUG
logging.level.org.springframework.data.r2dbc=DEBUG
logging.level.io.r2dbc.postgresql.QUERY=DEBUG
logging.level.liquibase=DEBUG
logging.level.liquibase.executor=DEBUG
logging.level.org.springframework.boot.autoconfigure.liquibase=DEBUG

# ===== Jackson Configuration =====
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.fail-on-unknown-properties=false

# ===== AI Generator Configuration (Optionnel) =====
ai.generator.enabled=true
ai.generator.provider=huggingface

# HuggingFace Configuration
ai.generator.huggingface.api-key=csk-2hpcwcf3t4rncmt6fnrymdnvyfwd6phe9whyjjwn2tjp3mk6
ai.generator.huggingface.base-url=https://api.cerebras.ai/v1
ai.generator.huggingface.model=llama3.1-8b
ai.generator.huggingface.timeout=60000
ai.generator.huggingface.max-tokens=8192

# Ollama Configuration (fallback local)
ai.generator.ollama.base-url=http://localhost:11434
ai.generator.ollama.model=llama3.2
ai.generator.ollama.timeout=600000
ai.generator.ollama.max-tokens=50000

# Fallback Configuration
ai.generator.fallback.use-heuristic=true
ai.generator.fallback.max-retries=3

# Validation & Cache
ai.generator.validation.max-message-length=182
ai.generator.validation.max-menu-options=8
ai.generator.validation.min-states=3
ai.generator.cache.enabled=true
ai.generator.cache.ttl-minutes=60

# Swagger Parser
ai.generator.swagger.timeout=30000
ai.generator.swagger.max-file-size-mb=5